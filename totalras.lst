Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2017.10.23 - 23:55:25]

totalras.asm
Errors: 0

       1   00:0000                      		output "TOTALRAS.rom"
       2   00:0000                      
       3   00:0000                      		defpage	 0,0x4000, 0x2000		; page 0 main code 
       4   00:0000                      		defpage	 1,0x6000, 0x2000		; page 1 
       5   00:0000                      		defpage	 2..31					; swapped data 
       6   00:0000                      	
       7   00:0000                      		;	konami scc
       8   00:0000                      		
       9   00:0000  (00:5000)           _kBank1:	equ 05000h ;- 57FFh (5000h used)
      10   00:0000  (00:7000)           _kBank2: 	equ 07000h ;- 77FFh (7000h used)
      11   00:0000  (00:9000)           _kBank3: 	equ 09000h ;- 97FFh (9000h used)
      12   00:0000  (00:B000)           _kBank4: 	equ 0B000h ;- B7FFh (B000h used)
      13   00:0000                      	
      14   00:0000  (00)                		page 0
      15   00:4000                      		
      16   00:4000                              org 4000h
      17   00:4000                              dw  4241h,START,0,0,0,0,0,0
      17   00:4000  41 42 3F 40 00 00 00 00 00 00 00 00 00 00 00 00 
      18   00:4010                      
      19   00:4010                      screeninit:
      20   00:4010  3E 08               		ld		a,8
      21   00:4012  CD 5F 00            		call	005fh		
      22   00:4015                      
      23   00:4015  F3                  		di                
      24   00:4016  3E 0A               		ld     a,#0A      
      25   00:4018  D3 99               		out    (#99),a    
      26   00:401A  3E 88               		ld     a,#88      
      27   00:401C  D3 99               		out    (#99),a  	; no sprites
      28   00:401E                      
      29   00:401E  FB                  		ei
      30   00:401F                      
      31   00:401F  21 00 00            		ld		hl,0h
      32   00:4022  CD 53 00            		call	0053h		
      33   00:4025                      
      34   00:4025  11 0F 01            		ld		de,256*:_opening+8+7
      35   00:4028                      		
      36   00:4028                      outvram:
      37   00:4028  7A                  2:		ld	a,d
      38   00:4029  32 00 70            		ld	(_kBank2),a
      39   00:402C  21 00 60            		ld	hl,0x6000
      40   00:402F                      		
      41   00:402F  01 98 00            		ld	bc,0x98
      42   00:4032  3E 20               		ld	a,32
      43   00:4034  ED B3               1:		otir
      44   00:4036  3D                  		dec	a
      45   00:4037  C2 34 40            		jp	nz,1b
      46   00:403A  14                  		inc	d
      47   00:403B  1D                  		dec	e
      48   00:403C  20 EA               		jr	nz,2b
      49   00:403E  C9                  		ret
      50   00:403F                      		
      51   00:403F                      		
      52   00:403F                      		
      53   00:403F                      		
      54   00:403F                      START:  
      55   00:403F  CD 10 40            		call	screeninit
      56   00:4042                      		
      57   00:4042  11 00 00            		ld de,0
      58   00:4045                      		
      59   00:4045  76                  2:		halt              ; allow ISR
      60   00:4046  F3                  		di
      61   00:4047  7A                  		ld		a,d
      62   00:4048  D3 99               		out    	(#99),a    
      63   00:404A  3E 97               		ld		a,23 or 010000000b
      64   00:404C  D3 99               		out    	(#99),a  	; scroll=0
      65   00:404E                      				
      66   00:404E  3E 3F                       ld		a,#3F           
      67   00:4050  D3 99               		out    	(#99),a    
      68   00:4052  3E 82               		ld		a,#82
      69   00:4054  D3 99               		out    	(#99),a    ; set page 1
      70   00:4056  FB                  		ei
      71   00:4057  CD 5E 40            		call   	raster_wave
      72   00:405A                      		
      73   00:405A  13                  		inc		de
      74   00:405B  C3 45 40            		jp		2b    
      75   00:405E                      ;S#2		
      76   00:405E                      ;b6	VR: Vertical scanning line timing flag
      77   00:405E                      ;		During vertical retrace and while lower and upper bordersare drawn, this flag is set to 1.
      78   00:405E                      
      79   00:405E                      ;b5	HR: Horizontal scanning line timing flag
      80   00:405E                      ;		During horizontal retrace and while left and right borders are drawn, this flag is set to 1.
      81   00:405E                             
      82   00:405E                      raster_wave:   
      83   00:405E  F3                  		di     
      84   00:405F                      		
      85   00:405F  3E 97               		ld     a,#97      
      86   00:4061  D3 99               		out    (#99),a    
      87   00:4063  3E 91               		ld     a,#91      
      88   00:4065  D3 99               		out    (#99),a  	; write R#23 using port 0x9B and R#17
      89   00:4067                      		
      90   00:4067  3E 6A               		ld		a,106
      91   00:4069  82                  		add		a,d
      92   00:406A  D3 99               		out    	(#99),a    
      93   00:406C  3E 93               		ld		a,19 or 010000000b
      94   00:406E  D3 99               		out    	(#99),a  	; Set FH at line 106
      95   00:4070                      
      96   00:4070  3E 01               		ld     a,#01      
      97   00:4072  D3 99                       out    (#99),a    
      98   00:4074  3E 8F               		ld     a,#8f      
      99   00:4076  D3 99               		out    (#99),a		; read S#1
     100   00:4078                      
     101   00:4078                      1:   						; wait for start of the line in R#19
     102   00:4078  DB 99               		in a,(#99)
     103   00:407A  0F                          rrca
     104   00:407B  D2 78 40                    jp nc,1b		
     105   00:407E                      
     106   00:407E  3E 1F                       ld		a,#1F           
     107   00:4080  D3 99               		out    	(#99),a    
     108   00:4082  3E 82               		ld		a,#82
     109   00:4084  D3 99               		out    	(#99),a    ; set page 0
     110   00:4086                      		
     111   00:4086  3E 02               		ld     a,#02      
     112   00:4088  D3 99                       out    (#99),a    
     113   00:408A  3E 8F               		ld     a,#8f      
     114   00:408C  D3 99               		out    (#99),a		; read S#2
     115   00:408E                      		
     116   00:408E                      
     117   00:408E  21 AC 40            		ld     	hl,raster_tab
     118   00:4091  06 67               		ld		b,103
     119   00:4093                      
     120   00:4093                      .loop:
     121   00:4093  7E                  		ld	a,(hl)
     122   00:4094  93                  		sub	a,e
     123   00:4095  23                  		inc	hl
     124   00:4096  08                  		ex af,af'
     125   00:4097                      		
     126   00:4097  DB 99               1:   	in     a,(#99)     ; wait for HR start  the line
     127   00:4099  CB 6F               		bit    5,a        
     128   00:409B  CA 97 40            		jp     z,1b   
     129   00:409E                      		
     130   00:409E  08                  		ex af,af'
     131   00:409F  D3 9B               		out	(#9B),a
     132   00:40A1  10 F0               		djnz .loop        
     133   00:40A3                      		
     134   00:40A3  AF                  		xor    a          
     135   00:40A4  D3 99               		out    (#99),a    
     136   00:40A6  3E 8F               		ld     a,#8f      
     137   00:40A8  D3 99               		out    (#99),a    
     138   00:40AA  FB                  		ei                
     139   00:40AB  C9                  		ret
     140   00:40AC                      		
     141   00:40AC                                 
     142   00:40AC                      
     143   00:40AC                      raster_tab:  
     144   00:40AC                      		repeat 256
     145   00:40AC                    < 		db (@#-256/(1+@#)) & 255
     146   00:40AC                    < 		endrepeat
     146   00:40AC  00 81 AD C3 D1 DB E2 E7 EC F0 F3 F6 F9 FB FD FF 
     146   00:40BC  01 03 05 07 08 0A 0B 0D 0E 10 11 12 14 15 16 17 
     146   00:40CC  19 1A 1B 1C 1E 1F 20 21 22 23 25 26 27 28 29 2A 
     146   00:40DC  2B 2C 2D 2F 30 31 32 33 34 35 36 37 38 39 3A 3B 
     146   00:40EC  3D 3E 3F 40 41 42 43 44 45 46 47 48 49 4A 4B 4C 
     146   00:40FC  4D 4E 4F 50 51 53 54 55 56 57 58 59 5A 5B 5C 5D 
     146   00:410C  5E 5F 60 61 62 63 64 65 66 67 68 69 6A 6B 6C 6D 
     146   00:411C  6E 6F 70 71 72 73 74 75 76 77 78 79 7A 7B 7C 7D 
     146   00:412C  7F 80 81 82 83 84 85 86 87 88 89 8A 8B 8C 8D 8E 
     146   00:413C  8F 90 91 92 93 94 95 96 97 98 99 9A 9B 9C 9D 9E 
     146   00:414C  9F A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 AA AB AC AD AE 
     146   00:415C  AF B0 B1 B2 B3 B4 B5 B6 B7 B8 B9 BA BB BC BD BE 
     146   00:416C  BF C0 C1 C2 C3 C4 C5 C6 C7 C8 C9 CA CB CC CD CE 
     146   00:417C  CF D0 D1 D2 D3 D4 D5 D6 D7 D8 D9 DA DB DC DD DE 
     146   00:418C  DF E0 E1 E2 E3 E4 E5 E6 E7 E8 E9 EA EB EC ED EE 
     146   00:419C  EF F0 F1 F2 F3 F4 F5 F6 F7 F8 F9 FA FB FC FD FE 
     147   00:41AC                        
     148   00:41AC                      		; include rast_mode8.txt		; include rast.txt
     149   00:41AC                      end_raster_tab:
     150   00:41AC                      
     151   00:41AC  (01)                		page 1
     152   01:6000                      _opening:
     153   01:6000  (2000)              		incbin "PLASMA.bin",0x0000,0x2000
     154   01:8000  (02)                		page 2
     155   02:6000  (2000)              		incbin "PLASMA.bin",0x2000,0x2000
     156   02:8000  (03)                		page 3
     157   03:6000  (2000)              		incbin "PLASMA.bin",0x4000,0x2000
     158   03:8000  (04)                		page 4
     159   04:6000  (2000)              		incbin "PLASMA.bin",0x6000,0x2000
     160   04:8000  (05)                		page 5
     161   05:6000  (2000)              		incbin "PLASMA.bin",0x8000,0x2000
     162   05:8000  (06)                		page 6
     163   06:6000  (2000)              		incbin "PLASMA.bin",0xA000,0x2000
     164   06:8000  (07)                		page 7
     165   07:6000  (2000)              		incbin "PLASMA.bin",0xC000,0x2000
     166   07:8000  (08)                		page 8
     167   08:6000  (2000)              		incbin "PLASMA.bin",0xE000,0x2000
     168   08:8000                      
     169   08:8000  (09)                		page 9
     170   09:6000  (2000)              		incbin "galaxy.bin",0x0000,0x2000
     171   09:8000  (0A)                		page 10
     172   0A:6000  (2000)              		incbin "galaxy.bin",0x2000,0x2000
     173   0A:8000  (0B)                		page 11
     174   0B:6000  (2000)              		incbin "galaxy.bin",0x4000,0x2000
     175   0B:8000  (0C)                		page 12
     176   0C:6000  (2000)              		incbin "galaxy.bin",0x6000,0x2000
     177   0C:8000  (0D)                		page 13
     178   0D:6000  (2000)              		incbin "galaxy.bin",0x8000,0x2000
     179   0D:8000  (0E)                		page 14
     180   0E:6000  (2000)              		incbin "galaxy.bin",0xA000,0x2000
     181   0E:8000  (0F)                		page 15
     182   0F:6000  (2000)              		incbin "galaxy.bin",0xC000,0x2000
     183   0F:8000  (10)                		page 16
     184   10:6000  (2000)              		incbin "galaxy.bin",0xE000,0x2000
     185   10:8000                      		

    LABELS
-------------------------------------------------
00:00005000 X _kBank1
00:00007000   _kBank2
00:00009000 X _kBank3
00:0000B000 X _kBank4
00:00004010   screeninit
00:00004028 X outvram
00:0000403F   START
00:0000405E   raster_wave
00:00004093   raster_wave.loop
00:000040AC   raster_tab
00:000041AC X end_raster_tab
01:00006000   _opening


 Output: totalras.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: TOTALRAS.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: 00002000  Used: 000001AC

   Address   Length Align   Label
   00004000     428         screeninit
   000041AC    7764       <empty>

 Page: 01
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         _opening

 Page: 02
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 03
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 04
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 05
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 06
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 07
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 08
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 09
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0A
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0B
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0C
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0D
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0E
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0F
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 10
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 11
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 12
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 13
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 14
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 15
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 16
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 17
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 18
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 19
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 1A
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 1B
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 1C
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 1D
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 1E
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 1F
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>
