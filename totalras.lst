Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2017.10.21 - 15:46:53]

totalras.asm
Errors: 0

       1   00:0000                      		output "TOTALRAS.rom"
       2   00:0000                      
       3   00:0000                      		defpage	 0,0x4000, 0x2000		; page 0 main code 
       4   00:0000                      		defpage	 1,0x6000, 0x2000		; page 1 
       5   00:0000                      		defpage	 2..15					; swapped data 
       6   00:0000                      	
       7   00:0000                      		;	konami scc
       8   00:0000                      		
       9   00:0000  (00:5000)           _kBank1:	equ 05000h ;- 57FFh (5000h used)
      10   00:0000  (00:7000)           _kBank2: 	equ 07000h ;- 77FFh (7000h used)
      11   00:0000  (00:9000)           _kBank3: 	equ 09000h ;- 97FFh (9000h used)
      12   00:0000  (00:B000)           _kBank4: 	equ 0B000h ;- B7FFh (B000h used)
      13   00:0000                      	
      14   00:0000  (00)                		page 0
      15   00:4000                      		
      16   00:4000                              org 4000h
      17   00:4000                              dw  4241h,START,0,0,0,0,0,0
      17   00:4000  41 42 3F 40 00 00 00 00 00 00 00 00 00 00 00 00 
      18   00:4010                      
      19   00:4010                      screeninit:
      20   00:4010  3E 08               		ld		a,8
      21   00:4012  CD 5F 00            		call	005fh		
      22   00:4015                      
      23   00:4015  F3                  		di                
      24   00:4016  3E 0A               		ld     a,#0A      
      25   00:4018  D3 99               		out    (#99),a    
      26   00:401A  3E 88               		ld     a,#88      
      27   00:401C  D3 99               		out    (#99),a  	; no sprites
      28   00:401E                      
      29   00:401E  FB                  		ei
      30   00:401F                      
      31   00:401F  21 00 00            		ld		hl,0h
      32   00:4022  CD 53 00            		call	0053h		
      33   00:4025                      
      34   00:4025  11 0F 01            		ld		de,256*:_opening+8+7
      35   00:4028                      		
      36   00:4028                      outvram:
      37   00:4028  7A                  2:		ld	a,d
      38   00:4029  32 00 70            		ld	(_kBank2),a
      39   00:402C  21 00 60            		ld	hl,0x6000
      40   00:402F                      		
      41   00:402F  01 98 00            		ld	bc,0x98
      42   00:4032  3E 20               		ld	a,32
      43   00:4034  ED B3               1:		otir
      44   00:4036  3D                  		dec	a
      45   00:4037  C2 34 40            		jp	nz,1b
      46   00:403A  14                  		inc	d
      47   00:403B  1D                  		dec	e
      48   00:403C  20 EA               		jr	nz,2b
      49   00:403E                      
      50   00:403E                      		; ld de,0
      51   00:403E                      ; 1:		xor a
      52   00:403E                      		; out (c),a
      53   00:403E                      		; dec de
      54   00:403E                      		; ld a,d
      55   00:403E                      		; or e
      56   00:403E                      		; jr nz,1b
      57   00:403E  C9                  		ret
      58   00:403F                      		
      59   00:403F                      		
      60   00:403F                      		
      61   00:403F                      		
      62   00:403F                      START:  
      63   00:403F  CD 10 40            		call	screeninit
      64   00:4042                      		
      65   00:4042  11 00 00            		ld de,0
      66   00:4045                      		
      67   00:4045  76                  2:		halt              ; allow ISR
      68   00:4046  F3                  		di
      69   00:4047  7A                  		ld		a,d
      70   00:4048  D3 99               		out    	(#99),a    
      71   00:404A  3E 97               		ld		a,23 or 010000000b
      72   00:404C  D3 99               		out    	(#99),a  	; scroll=0
      73   00:404E                      				
      74   00:404E  3E 3F                       ld		a,#3F           
      75   00:4050  D3 99               		out    	(#99),a    
      76   00:4052  3E 82               		ld		a,#82
      77   00:4054  D3 99               		out    	(#99),a    ; set page 1
      78   00:4056  FB                  		ei
      79   00:4057  CD 5E 40            		call   	raster_wave
      80   00:405A                      		
      81   00:405A  13                  		inc		de
      82   00:405B  C3 45 40            		jp		2b    
      83   00:405E                      ;S#2		
      84   00:405E                      ;b6	VR: Vertical scanning line timing flag
      85   00:405E                      ;		During vertical retrace and while lower and upper bordersare drawn, this flag is set to 1.
      86   00:405E                      
      87   00:405E                      ;b5	HR: Horizontal scanning line timing flag
      88   00:405E                      ;		During horizontal retrace and while left and right borders are drawn, this flag is set to 1.
      89   00:405E                             
      90   00:405E                      raster_wave:   
      91   00:405E  F3                  		di     
      92   00:405F                      		
      93   00:405F  3E 97               		ld     a,#97      
      94   00:4061  D3 99               		out    (#99),a    
      95   00:4063  3E 91               		ld     a,#91      
      96   00:4065  D3 99               		out    (#99),a  	; write R#23 using port 0x9B and R#17
      97   00:4067                      		
      98   00:4067  3E 6A               		ld		a,106
      99   00:4069  82                  		add		a,d
     100   00:406A  D3 99               		out    	(#99),a    
     101   00:406C  3E 93               		ld		a,19 or 010000000b
     102   00:406E  D3 99               		out    	(#99),a  	; Set FH at line 106
     103   00:4070                      
     104   00:4070  3E 01               		ld     a,#01      
     105   00:4072  D3 99                       out    (#99),a    
     106   00:4074  3E 8F               		ld     a,#8f      
     107   00:4076  D3 99               		out    (#99),a		; read S#1
     108   00:4078                      
     109   00:4078                      1:   						; wait for start of the line in R#19
     110   00:4078  DB 99               		in a,(#99)
     111   00:407A  0F                          rrca
     112   00:407B  D2 78 40                    jp nc,1b		
     113   00:407E                      
     114   00:407E  3E 1F                       ld		a,#1F           
     115   00:4080  D3 99               		out    	(#99),a    
     116   00:4082  3E 82               		ld		a,#82
     117   00:4084  D3 99               		out    	(#99),a    ; set page 0
     118   00:4086                      		
     119   00:4086  3E 02               		ld     a,#02      
     120   00:4088  D3 99                       out    (#99),a    
     121   00:408A  3E 8F               		ld     a,#8f      
     122   00:408C  D3 99               		out    (#99),a		; read S#2
     123   00:408E                      		
     124   00:408E                      
     125   00:408E  21 AB 40            		ld     	hl,raster_tab
     126   00:4091  01 9B 67            		ld		bc,256*103+0x9B
     127   00:4094                      
     128   00:4094                      
     129   00:4094                      .loop:					
     130   00:4094  DB 99               1:   	in     a,(#99)     ; wait for HR start  the line
     131   00:4096  CB 6F               		bit    5,a        
     132   00:4098  CA 94 40            		jp     z,1b   
     133   00:409B                      		
     134   00:409B  7E                  		ld	a,(hl)
     135   00:409C  93                  		sub	a,e
     136   00:409D  ED 79               		out	(c),a
     137   00:409F  23                  		inc	hl
     138   00:40A0  10 F2               		djnz .loop        
     139   00:40A2                      		
     140   00:40A2  AF                  		xor    a          
     141   00:40A3  D3 99               		out    (#99),a    
     142   00:40A5  3E 8F               		ld     a,#8f      
     143   00:40A7  D3 99               		out    (#99),a    
     144   00:40A9  FB                  		ei                
     145   00:40AA  C9                  		ret
     146   00:40AB                      		
     147   00:40AB                                 
     148   00:40AB                      
     149   00:40AB                      raster_tab:  
     150   00:40AB                      		; repeat 106
     151   00:40AB                      		; db -@#
     152   00:40AB                      		; endrepeat
     153   00:40AB                      		repeat 256
     154   00:40AB                    < 		db (@#-256/(1+@#)) & 255
     155   00:40AB                    < 		endrepeat
     155   00:40AB  00 81 AD C3 D1 DB E2 E7 EC F0 F3 F6 F9 FB FD FF 
     155   00:40BB  01 03 05 07 08 0A 0B 0D 0E 10 11 12 14 15 16 17 
     155   00:40CB  19 1A 1B 1C 1E 1F 20 21 22 23 25 26 27 28 29 2A 
     155   00:40DB  2B 2C 2D 2F 30 31 32 33 34 35 36 37 38 39 3A 3B 
     155   00:40EB  3D 3E 3F 40 41 42 43 44 45 46 47 48 49 4A 4B 4C 
     155   00:40FB  4D 4E 4F 50 51 53 54 55 56 57 58 59 5A 5B 5C 5D 
     155   00:410B  5E 5F 60 61 62 63 64 65 66 67 68 69 6A 6B 6C 6D 
     155   00:411B  6E 6F 70 71 72 73 74 75 76 77 78 79 7A 7B 7C 7D 
     155   00:412B  7F 80 81 82 83 84 85 86 87 88 89 8A 8B 8C 8D 8E 
     155   00:413B  8F 90 91 92 93 94 95 96 97 98 99 9A 9B 9C 9D 9E 
     155   00:414B  9F A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 AA AB AC AD AE 
     155   00:415B  AF B0 B1 B2 B3 B4 B5 B6 B7 B8 B9 BA BB BC BD BE 
     155   00:416B  BF C0 C1 C2 C3 C4 C5 C6 C7 C8 C9 CA CB CC CD CE 
     155   00:417B  CF D0 D1 D2 D3 D4 D5 D6 D7 D8 D9 DA DB DC DD DE 
     155   00:418B  DF E0 E1 E2 E3 E4 E5 E6 E7 E8 E9 EA EB EC ED EE 
     155   00:419B  EF F0 F1 F2 F3 F4 F5 F6 F7 F8 F9 FA FB FC FD FE 
     156   00:41AB                        
     157   00:41AB                      		; include rast_mode8.txt		; include rast.txt
     158   00:41AB                      end_raster_tab:
     159   00:41AB                      
     160   00:41AB  (01)                		page 1
     161   01:6000                      _opening:
     162   01:6000  (2000)              		incbin "PLASMA.bin",0x0000,0x2000
     163   01:8000  (02)                		page 2
     164   02:6000  (2000)              		incbin "PLASMA.bin",0x2000,0x2000
     165   02:8000  (03)                		page 3
     166   03:6000  (2000)              		incbin "PLASMA.bin",0x4000,0x2000
     167   03:8000  (04)                		page 4
     168   04:6000  (2000)              		incbin "PLASMA.bin",0x6000,0x2000
     169   04:8000  (05)                		page 5
     170   05:6000  (2000)              		incbin "PLASMA.bin",0x8000,0x2000
     171   05:8000  (06)                		page 6
     172   06:6000  (2000)              		incbin "PLASMA.bin",0xA000,0x2000
     173   06:8000  (07)                		page 7
     174   07:6000  (2000)              		incbin "PLASMA.bin",0xC000,0x2000
     175   07:8000  (08)                		page 8
     176   08:6000  (2000)              		incbin "PLASMA.bin",0xE000,0x2000
     177   08:8000                      
     178   08:8000  (09)                		page 9
     179   09:6000  (2000)              		incbin "galaxy.bin",0x0000,0x2000
     180   09:8000  (0A)                		page 10
     181   0A:6000  (2000)              		incbin "galaxy.bin",0x2000,0x2000
     182   0A:8000  (0B)                		page 11
     183   0B:6000  (2000)              		incbin "galaxy.bin",0x4000,0x2000
     184   0B:8000  (0C)                		page 12
     185   0C:6000  (2000)              		incbin "galaxy.bin",0x6000,0x2000
     186   0C:8000  (0D)                		page 13
     187   0D:6000  (2000)              		incbin "galaxy.bin",0x8000,0x2000
     188   0D:8000  (0E)                		page 14
     189   0E:6000  (2000)              		incbin "galaxy.bin",0xA000,0x2000
     190   0E:8000  (0F)                		page 15
     191   0F:6000  (2000)              		incbin "galaxy.bin",0xC000,0x2000
     192   0F:8000                      		; page 16
     193   0F:8000                      		; incbin "galaxy.bin",0xE000,0x2000
     194   0F:8000                      		

    LABELS
-------------------------------------------------
00:00005000 X _kBank1
00:00007000   _kBank2
00:00009000 X _kBank3
00:0000B000 X _kBank4
00:00004010   screeninit
00:00004028 X outvram
00:0000403F   START
00:0000405E   raster_wave
00:00004094   raster_wave.loop
00:000040AB   raster_tab
00:000041AB X end_raster_tab
01:00006000   _opening


 Output: totalras.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: TOTALRAS.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: 00002000  Used: 000001AB

   Address   Length Align   Label
   00004000     427         screeninit
   000041AB    7765       <empty>

 Page: 01
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         _opening

 Page: 02
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 03
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 04
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 05
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 06
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 07
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 08
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 09
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0A
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0B
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0C
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0D
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0E
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 0F
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         
